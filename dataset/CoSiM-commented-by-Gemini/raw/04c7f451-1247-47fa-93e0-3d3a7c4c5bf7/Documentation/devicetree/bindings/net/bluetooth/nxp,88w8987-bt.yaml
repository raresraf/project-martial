# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/bluetooth/nxp,88w8987-bt.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: NXP Bluetooth chips

description: |
  This document specifies the devicetree binding for UART-attached NXP
  Bluetooth controllers, which are part of dual-radio Wi-Fi/Bluetooth combo
  chips. The binding defines the necessary properties for the kernel to
  correctly initialize the firmware, configure the UART communication parameters,
  and manage the power-saving wakeup mechanisms. The communication protocol
  is standard HCI (H4) over a 4-wire UART interface.

maintainers:
  - Neeraj Sanjay Kale <neeraj.sanjaykale@nxp.com>

allOf:
  - $ref: bluetooth-controller.yaml#

properties:
  compatible:
    description: Identifies the specific NXP Bluetooth chip model.
    enum:
      - nxp,88w8987-bt
      - nxp,88w8997-bt

  fw-init-baudrate:
    $ref: /schemas/types.yaml#/definitions/uint32
    default: 115200
    description:
      Specifies the UART baud rate to be used after the firmware has been
      successfully downloaded and the device is initialized. This rate is
      typically higher than the initial boot ROM baud rate and is dependent
      on the firmware's configuration.

  firmware-name:
    description: The filename of the firmware to be loaded into the device.
    maxItems: 1

  device-wakeup-gpios:
    maxItems: 1
    description:
      Defines the GPIO pin used by the host to wake up the Bluetooth chip.
      This corresponds to the BT_WAKE_IN pin on the NXP chipset and is a key
      component of the host-to-chip power-saving mechanism.

  nxp,wakein-pin:
    $ref: /schemas/types.yaml#/definitions/uint8
    description:
      Specifies the internal GPIO pin number on the NXP chipset that is
      configured as the BT_WAKE_IN signal.

  interrupts:
    maxItems: 1
    description:
      Specifies the interrupt line connected from the Bluetooth chip's
      BT_WAKE_OUT pin to the host. The host uses this interrupt, typically
      triggered on a falling edge, to wake up from a low-power state when the
      Bluetooth chip needs attention.

  interrupt-names:
    items:
      - const: wakeup

  wakeup-source:
    description:
      Indicates that this device can wake the system from suspend. This property
      is essential for enabling low-power modes where the host CPU can sleep
      while the Bluetooth controller remains active.
    true

  nxp,wakeout-pin:
    $ref: /schemas/types.yaml#/definitions/uint8
    description:
      Specifies the internal GPIO pin number on the NXP chipset that is
      configured as the BT_WAKE_OUT signal.

required:
  - compatible

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>
    #include <dt-bindings/interrupt-controller/irq.h>
    serial {
        bluetooth {
            compatible = "nxp,88w8987-bt";
            fw-init-baudrate = <3000000>;
            firmware-name = "uartuart8987_bt_v0.bin";
            device-wakeup-gpios = <&gpio 11 GPIO_ACTIVE_HIGH>;
            nxp,wakein-pin = /bits/ 8 <18>;
            nxp,wakeout-pin = /bits/ 8 <19>;
            local-bd-address = [66 55 44 33 22 11];
            interrupt-parent = <&gpio>;
            interrupts = <8 IRQ_TYPE_EDGE_FALLING>;
            interrupt-names = "wakeup";
            wakeup-source;
        };
    };
