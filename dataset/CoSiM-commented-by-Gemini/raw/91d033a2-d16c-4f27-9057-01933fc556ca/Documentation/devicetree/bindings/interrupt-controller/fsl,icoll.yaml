# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
#
# @file fsl,icoll.yaml
# @brief Device Tree Binding for the Freescale i.MX23/i.MX28 Interrupt Collector (ICOLL)
# @details This document specifies the device tree properties required to describe the ICOLL
#          interrupt controller found on Freescale/NXP i.MX23 and i.MX28 SoCs. The ICOLL
#          aggregates interrupt sources and presents them to the primary CPU interrupt controller.
#
$id: http://devicetree.org/schemas/interrupt-controller/fsl,icoll.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Freescale MXS icoll Interrupt controller

maintainers:
  - Frank Li <Frank.Li@nxp.com>

# Defines the properties that can be used to describe an ICOLL device node.
properties:
  # The 'compatible' property is a string that identifies the specific device.
  # The kernel uses this to match the device node with the correct driver.
  compatible:
    oneOf:
      - items:
          - enum:
              - fsl,imx23-icoll # Specific compatible for i.MX23
              - fsl,imx28-icoll # Specific compatible for i.MX28
          - const: fsl,icoll # A more generic compatible, used as a fallback.

  # The 'reg' property specifies the physical memory address and size of the device's register block.
  reg:
    maxItems: 1

  # This property indicates that the device node represents an interrupt controller.
  interrupt-controller: true

  # This property defines the number of cells required to specify an interrupt.
  # For this controller, a single cell (the interrupt number) is sufficient.
  '#interrupt-cells':
    const: 1

# Specifies the list of properties that are mandatory for a valid device node.
required:
  - compatible
  - reg
  - interrupt-controller
  - '#interrupt-cells'

# Disallows any properties not explicitly defined in this schema.
additionalProperties: false

# Provides an example of a valid ICOLL device node declaration.
examples:
  - |
    # This example shows an ICOLL node for an i.MX28 SoC.
    interrupt-controller@80000000 {
        # The compatible string identifies the device as an i.MX28 ICOLL, with a fallback.
        compatible = "fsl,imx28-icoll", "fsl,icoll";
        # The register block is located at physical address 0x80000000 and is 0x2000 bytes in size.
        reg = <0x80000000 0x2000>;
        # Marks this node as an interrupt controller.
        interrupt-controller;
        # Specifies that one cell is needed to define an interrupt from this controller.
        #interrupt-cells = <1>;
    };